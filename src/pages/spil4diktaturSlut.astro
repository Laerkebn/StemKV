---
import Layout from "../layouts/Layout.astro";
---

<Layout 
  bgColor="bg-[#0000A4]" 
  headerColor="bg-[#0000A4]" 
  footerColor="bg-[#0000A4]"
  headerLogo="/Billeder/tom.svg"
  footerLogos={[
    { src: "/Billeder/tom.svg", alt: "logo" },
    { src: "/Billeder/tom.svg", alt: "logo" },
    { src: "/Billeder/tom.svg", alt: "logo" }
  ]}
>
  <div class="justify-center flex w-full">
    <div class="w-full max-w-5xl p-5">

      <div class="flex rounded-lg justify-center pt-10">

        <div id="main-container" class="p-5 w-full flex-col rounded-lg">

          <div class="text-left font-Jersey15-Regular">

            <!-- Første tekst -->
            <h1 
              id="main-text"
              class="font-Jersey10-Regular flex font-bold text-[#FFFFFF] text-3xl sm:text-4xl p-5 pb-5 text-left"
            >
              Din enhed stødte på et problem og skal genstartes. Vi indsamler nogle fejloplysninger, og så genstarter vi for dig.
            </h1>

            <!-- Ok-knap -->
            <div class="flex justify-center px-5 mb-5 space-x-7">
              <a
                href="#"
                id="ok-btn"
             class="font-Jersey10-Regular py-5 font-bold hover:text-[#660000] text-[#FFFFFF] text-center text-3xl sm:text-4xl p-5 pb-5 text-left"
               style="box-shadow: 0 0 10px #0f172a;" >
                Ok
              </a>
            </div>

            <!-- Ekstra tekst -->
            <h1 
              id="extra-text"
              class="font-Jersey10-Regular flex font-bold text-[#FFFFFF] text-3xl sm:text-4xl p-5 pb-5 text-left"
            >
              20 % fuldført
            </h1>

            <!-- Billede -->
            <img
              id="grass-img"
              src="/Billeder/grass.svg"
              alt="qrkode"
              class="w-[300px] h-auto flex rounded-lg"
            />

            <!-- GIF (skjult til starten) -->
            <img 
              id="final-gif" 
              src="/Billeder/jump.gif" 
               class="hidden fixed top-0 left-0 w-full h-full object-cover z-50"

            />

            <!-- Audio -->
            <audio id="final-audio" src="/lyde/skrig.mp3" preload="auto"></audio>

          </div>
        </div>
      </div>
    </div>
  </div>

  
  <script>
    // Liste over elementer, der skal blive sorte / skjulte
    const elementsToDarken = [
      document.querySelector('main'),       // baggrund
      document.querySelector('header'),     // header
      document.querySelector('footer'),     // footer
      document.getElementById('main-container'), 
      document.getElementById('main-text'),
      document.getElementById('extra-text'),
      document.getElementById('grass-img')
    ];

    const okBtn = document.getElementById('ok-btn');
    const finalGif = document.getElementById('final-gif');
    const finalAudio = document.getElementById('final-audio');
    let index = 0;

    okBtn.addEventListener('click', (e) => {
      e.preventDefault();

      if (index < elementsToDarken.length) {
        const el = elementsToDarken[index];

        if (!el) return; // sikkerhed

        if(el.tagName === 'IMG' || el.tagName === 'H1') {
          el.classList.add('hidden'); // skjul billeder
        } else {
          el.style.backgroundColor = 'black';
          el.style.color = 'white'; // ændrer tekstfarve hvis relevant
        }

       index++;
      } else {
        // Vis GIF og afspil lyd
        finalGif.classList.remove('hidden');
        const finalAudio = document.getElementById('final-audio') as HTMLAudioElement;
        finalAudio.currentTime = 1,5;
        finalAudio.play();
      }
    });

    elementsToDarken.forEach(el => {
  if (!el) return;
});
  </script>

</Layout>
